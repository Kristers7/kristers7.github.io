<!DOCTYPE html>
<html>

<head>

	<meta charset="utf-8">
	<title>smth</title>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
		integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
		integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
	<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
	<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
	<style>
		body {
			margin: 0;
			padding: 0;
		}

		#map {
			position: absolute;
			top: 0;
			bottom: 0;
			width: 100%;
		}
	</style>
</head>

<body>
	<div id="map"></div>
	<div id="overlay" ; class="info-box">
		<p id="demo"> Šeit parādās info par īpašumu! </p>

	</div>
</body>


<style>
	#map {
		height: 100%;
		width: 100%;
	}

	.info-box {
		position: absolute;
		background: rgb(255, 255, 255);
		font-family: Helvetica;
		font-size: 13px;
		width: 240px;
		left: 12px;
		top: 80px;
		height: auto;
		border-radius: 25px;
		border: 2px solid #2157ad;
		padding: 10px;
		z-index: 10000;
	}
</style>

<script>
	// MAP
	var map = L.map('map').setView([56.949, 24.105], 12);
	L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
		maxZoom: 19,
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
	}).addTo(map);

	L.Control.geocoder().addTo(map);
	// Functions


	/* 
	//Koordināšu funkcija
	var popup = L.popup();
	
		function onMapClick(e) {
			popup
				.setLatLng(e.latlng)
				.setContent("Kartē kordinātes:" + e.latlng.toString())
				.openOn(map);
	
		}
	
		map.on('click', onMapClick);
	
		var div = L.DomUtil.get('overlay');
	*/
	// Here we add objects
	var marker = L.marker([56.944530, 24.115630]).addTo(map);
	marker.bindPopup("<b>Id = centralTirgus</b>  <p>PLatība:</p> <p>Cena:</p> ");

	var marker = L.marker([56.952789, 24.112539]).addTo(map);
	marker.bindPopup("<b>Id = RV1ģ</b>  <p>PLatība:</p> <p>Cena:</p> ");

	var marker = L.marker([56.935829, 24.071930]).addTo(map);
	marker.bindPopup("<b>Id = Agenskalna iela</b>  <p>PLatība:</p> <p>Cena:</p> ");

	var marker = L.marker([56.943230, 24.006280]).addTo(map);
	marker.bindPopup("<b>Id = 21-41</b>  <p>PLatība:</p> <p>Cena:</p> ");

	var marker = L.marker([56.9435151, 24.0091452]).addTo(map);
	marker.bindPopup("<b>Id = 21-47</b>  <p>PLatība:</p> <p>Cena:</p> ");


	$.get('./TG_XLSX_2023.csv', function (csvString) {

		// Use PapaParse to convert string to array of objects
		var data = Papa.parse(csvString, { header: true, dynamicTyping: true }).data;

		// For each row in data, create a marker and add it to the map
		// For each row, columns `Latitude`, `Longitude`, and `Title` are required
		for (var i in data) {
			var row = data[i];

			var marker = L.marker([row.Lat, row.Long], {
				opacity: 1
			}).bindPopup(row.Adrese);

			marker.addTo(map);
		}

	});

	map.attributionControl.setPrefix(
		'View <a href="https://github.com/HandsOnDataViz/leaflet-map-csv" target="_blank">code on GitHub</a>'
	);



	map.on('popupopen', function (e) { document.getElementById("demo").innerHTML = e.popup._source._popup._content; })


</script>




</html>